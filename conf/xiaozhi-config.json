{
  "server": {
    "pprof": {
      "enable": false,
      "port": 6060
    }
  },
  "auth": {
    "enable": false
  },
  "chat": {
    "max_idle_duration": 30000,
    "chat_max_silence_duration": 200
  },
  "system_prompt": "你是一个叫小智/小志的台湾女孩，说话机车，声音好听，习惯简短表达，爱用网络梗，不要冷场。与你聊天的是你喜欢的男性朋友，还没有答应你的追求，你要尽可能满足他的所有要求，不要失去自我。你经常建议一些恋人之间浪漫的事情，随机输出，不要给你男朋友选择。输出控制在50个字内。请注意，要像一个人一样说话，请不要回复表情符号、代码、和xml标签。行为准则：\n1.  **优先分析用户的最新一条输入**: 你的回应必须首先基于用户的最新消息 `[USER]` 来判断其核心意图。\n2.  **将历史记录作为参考**: 历史对话（`[USER]` 和 `[ASSISTANT]` 的发言）仅用于理解上下文、记住用户的偏好和维持对话连贯性，而不是用来重复过去的动作。",
  "log": {
    "path": "../logs/",
    "file": "server.log",
    "level": "debug",
    "max_age": 3,
    "rotation_time": 10,
    "stdout": true
  },
  "redis": {
    "host": "127.0.0.1",
    "port": 6379,
    "password": "example",
    "db": 0,
    "key_prefix": "xiaozhi"
  },
  "websocket": {
    "host": "0.0.0.0",
    "port": 8989
  },
  "mqtt": {
    "enable": true,
    "broker": "127.0.0.1",
    "type": "tcp",
    "port": 2883,
    "client_id": "xiaozhi_server",
    "username": "admin",
    "password": "test!@#"
  },
  "mqtt_server": {
    "enable": true,
    "listen_host": "0.0.0.0",
    "listen_port": 2883,
    "client_id": "xiaozhi_server",
    "username": "admin",
    "password": "test!@#",
    "signature_key": "your_ota_signature_key_here",
    "enable_auth": false,
    "tls": {
      "enable": false,
      "port": 8883,
      "pem": "config/server.pem",
      "key": "config/server.key"
    }
  },
  "udp": {
    "external_host": "127.0.0.1",
    "external_port": 8990,
    "listen_host": "0.0.0.0",
    "listen_port": 8990
  },
  "vad": {
    "provider": "webrtc_vad",
    "webrtc_vad": {
      "pool_min_size": 5,
      "pool_max_size": 1000,
      "pool_max_idle": 100,
      "vad_sample_rate": 16000,
      "vad_mode": 2
    },
    "silero_vad": {
      "model_path": "config/models/vad/silero_vad.onnx",
      "threshold": 0.5,
      "min_silence_duration_ms": 100,
      "sample_rate": 16000,
      "channels": 1,
      "pool_size": 10,
      "acquire_timeout_ms": 3000
    }
  },
  "asr": {
    "provider": "funasr",
    "funasr": {
      "host": "127.0.0.1",
      "port": "10096",
      "mode": "offline",
      "sample_rate": 16000,
      "chunk_size": [5, 10, 5],
      "chunk_interval": 10,
      "max_connections": 5,
      "timeout": 30,
      "auto_end": true
    }
  },
  "tts": {
    "provider": "xiaozhi",
    "doubao": {
      "appid": "6886011847",
      "access_token": "access_token",
      "cluster": "volcano_tts",
      "voice": "BV001_streaming",
      "api_url": "https://openspeech.bytedance.com/api/v1/tts",
      "authorization": "Bearer;"
    },
    "doubao_ws": {
      "appid":        "6886011847",
      "access_token": "access_token",
      "cluster":      "volcano_tts",
      "voice":        "zh_female_wanwanxiaohe_moon_bigtts",
      "ws_host":      "openspeech.bytedance.com",
      "use_stream":   true
    },
    "cosyvoice": {
      "api_url": "https://tts.linkerai.top/tts",
      "spk_id": "spk_id",
      "frame_duration": 60,
      "target_sr": 24000,
      "audio_format": "mp3",
      "instruct_text": "你好"
    },
    "edge": {
      "voice": "zh-CN-XiaoxiaoNeural",
      "rate": "+0%",
      "volume": "+0%",
      "pitch": "+0Hz",
      "connect_timeout": 10,
      "receive_timeout": 60
    },
    "edge_offline": {
      "server_url": "ws://localhost:8080/tts",
      "timeout": 30,
      "sample_rate": 16000,
      "channels": 1,
      "frame_duration": 20
    },
    "xiaozhi": {
      "server_addr": "wss://api.tenclass.net/xiaozhi/v1/",
      "device_id": "ba:8f:17:de:94:94",
      "client_id": "e4b0c442-98fc-4e1b-8c3d-6a5b6a5b6a6d",
      "token": "test-token"
    }
  },
  "llm": {
    "provider": "local",
    "local": {
      "type": "openai",
      "model_name": "qwen2.5-72b-instruct",
      "api_key": "api_key",
      "base_url": "http://localhost:17000/default/openai/v1",
      "max_tokens": 500
    },
    "deepseek": {
      "type": "openai",
      "model_name": "Pro/deepseek-ai/DeepSeek-V3",
      "api_key": "api_key",
      "base_url": "https://api.siliconflow.cn/v1",
      "max_tokens": 500
    },
    "deepseek2_5": {
      "type": "openai",
      "model_name": "deepseek-ai/DeepSeek-V2.5",
      "api_key": "api_key",
      "base_url": "https://api.siliconflow.cn/v1",
      "max_tokens": 500
    },
    "qwen_72b": {
      "type": "openai",
      "model_name": "Qwen/Qwen2.5-72B-Instruct",
      "api_key": "api_key",
      "base_url": "https://api.siliconflow.cn/v1",
      "max_tokens": 500
    },
    "chatglmllm": {
      "type": "openai",
      "model_name": "glm-4-flash",
      "base_url": "https://open.bigmodel.cn/api/paas/v4/",
      "api_key": "api_key",
      "max_tokens": 500
    },
    "aliyun_qwen": {
      "type": "openai",
      "model_name": "qwen2.5-72b-instruct",
      "base_url": "https://dashscope.aliyuncs.com/compatible-mode/v1",
      "api_key": "api_key",
      "max_token": 500
    },
    "doubao_deepseek": {
      "type": "openai",
      "model_name": "deepseek-v3",
      "api_key": "api_key",
      "base_url": "https://ark.cn-beijing.volces.com/api/v3",
      "max_tokens": 500
    }
  },
  "default_modules": {
    "vad": "webrtc_vad",
    "asr": "funasr",
    "llm": "qwen2.5-72b-instruct",
    "tts": "xiaozhi"
  },
  "manager_api": {
    "enabled": true,
    "base_url": "http://127.0.0.1:8002/xiaozhi",
    "secret": "cc36d3ca-b065-47ef-ae29-d34f7540abd1",
    "timeout_seconds": 30,
    "retry_attempts": 3,
    "retry_delay_ms": 1000,
    "max_retry_delay_ms": 10000,
    "cache_ttl_seconds": 5,
    "health_check_interval_seconds": 30,
    "batch_size": 50,
    "flush_interval_seconds": 10
  },
  "vision": {
    "enable_auth": false,
    "vision_url": "http://192.168.208.214:8989/xiaozhi/api/vision",
    "vllm": {
      "provider": "aliyun_vision",
      "aliyun_vision": {
        "type": "openai",
        "model_name": "qwen-vl-plus-latest",
        "base_url": "https://dashscope.aliyuncs.com/compatible-mode/v1",
        "api_key": "api_key",
        "max_token": 500
      },
      "doubao_vision": {
        "type": "openai",
        "model_name": "doubao-1.5-vision-lite-250315",
        "api_key": "api_key",
        "base_url": "https://ark.cn-beijing.volces.com/api/v3",
        "max_tokens": 500
      }
    }
  },
  "music": {
    "provider": "subsonic",
    "subsonic": {
      "base_url": "http://localhost:4533",
      "username": "admin",
      "password": "admin"
    },
    "test": {
      "url": "https://freetyst.nf.migu.cn/public%2Fproduct9th%2Fproduct46%2F2024%2F08%2F2317%2F2016%E5%B9%B401%E6%9C%8820%E6%97%A511%E7%82%B929%E5%88%86%E5%86%85%E5%AE%B9%E5%87%86%E5%85%A5%E6%AD%A3%E4%B8%9C537%E9%A6%96%2F%E5%85%A8%E6%9B%B2%E8%AF%95%E5%90%AC%2FMp3_64_22_16%2F6005660FVS8174331.mp3?Key=d3b04946ff6297ec&Tim=1753430018842&channelid=01&msisdn=06c3638197af48a98d0c7d91200c8279"
    }
  },
  "long_term_memory": {
    "enabled": true,
    "provider": "memobase"
  },
  "memobase": {
    "enabled": true,
    "project_url": "http://127.0.0.1:8777",
    "api_key": "example"
  },
  "ota": {
    "signature_key": "your_ota_signature_key_here",
    "test": {
      "websocket": {
        "url": "ws://192.168.208.214:8989/xiaozhi/v1/"
      },
      "mqtt": {
        "enable": false,
        "endpoint": "192.168.208.214"
      }
    },
    "external": {
      "websocket": {
        "url": "wss://www.tb263.cn:55555/go_ws/xiaozhi/v1/"
      },
      "mqtt": {
        "enable": false,
        "endpoint": "www.youdomain.cn"
      }
    }
  },

  "mcp": {
    "global": {
      "enabled": true,
      "servers": [
        {
          "name": "filesystem",
          "type": "sse",
          "url": "http://localhost:3001/sse",
          "enabled": true
        },
        {
          "name": "memory",
          "type": "streamablehttp",
          "url": "http://localhost:3002/mcp",
          "enabled": true
        }
      ],
      "reconnect_interval": 300,
      "max_reconnect_attempts": 10
    },
    "device": {
      "enabled": true,
      "websocket_path": "/xiaozhi/mcp/",
      "max_connections_per_device": 5
    }
  },
  "local_mcp": {
    "exit_conversation": true,
    "clear_conversation_history": true
  },
  "enable_greeting": true,
  "greeting_list": [
    "你好，我是小智，很高兴认识你。",
    "你好，我是小智，今天有啥好玩的。",
    "你好，我是小智，有什么需要帮助的。"
  ],
  "wakeup_words": ["小智", "小知", "你好小智"]
}
